<%- include("../partials/header.ejs") %>

<div class="container">
    <div class="view-content">
        <h1>DELIVERY ADDRESS</h1>
        <form action="/cart/<%= cart._id %>/place-Order" method="POST">
        <p>To place order, please add a delivery address</p><hr>
        <div class="mb-3">
            <label class="form-label">Shipping Address :</label>
            <input type="text" class="form-control" name="shippingAddress", value="<%= cart.user.address %> <%= cart.user.city %> <%= cart.user.postalCode %>">
          </div>

        
        <div class="mb-3">
            <label class="form-label">Credit Card :</label>
            <input type="text" class="form-control" name="payment[cardNumber]" placeholder="Card Number"><br>
            <input type="text" class="form-control" name="payment[expiryDate]" placeholder="Expiry Date (MM/YY)"><br>
            <input type="text" class="form-control" name="payment[CVV]" placeholder="CVV"><br>
            <input type="text" class="form-control" name="payment[nameOnCard]" placeholder="Name on Card">
          </div>

    </div><br>

    <div class="view-content">
        <h1>Order Item</h1><hr>
        <% cart.products.forEach(function(product){ %>  
            <div class="cart-content">
                <div class="cart-box">
                    <img src="<%= product.image %>" class="cart-img">
                    <div class="detail-box">
                        <div class="cart-product-title"><%= product.name %></div>
                        <div class="cart-price"> <%= product.price %> .-</div>
                        <button class="button-Qty">
                            <span class="badge"><%= product.qty %></span>
                         </button>
                    </div>
                </div>
                <hr>
            </div>
            <% }) %> 
            <p>You Have <%= cart.totalQty %> items in Order</p>
        </div><br>

        <div class="view-content">
            <h1>Order Summary</h1><hr>
            <h5>Date : <%= new Intl.DateTimeFormat('en-GB', { year: 'numeric', month: 'long', day: '2-digit'}).format(new Date()) %></h5><br>
            <h5>Subtotal (<%= cart.totalQty %> Item) : <%= cart.totalprice %> .-</h5><br>
            <h5>Shipping Total: <%= cart.Shipping %> .-</h5><br>
            <h5>Total Payment: <%= cart.totalPayment %> .-</h5><br>
            <p></p>
            <!-- <a href="#" class="btn btn-secondary" id="btn-checkout">Place Order</a>
            <a href="/shopping-cart" class="btn btn-info" id="back">Back</a> -->
            <button type="submit" class="btn btn-secondary" id="btn-checkout">Place Order</button>
            <a href="/shopping-cart" class="btn btn-info" id="back" >Back</a>
        </form>
        </div>

    </div>
</div>


    

<%- include("../partials/footer.ejs") %>